<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Survey</title>


	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
	 crossorigin="anonymous">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
	 crossorigin="anonymous">


	<style>
		.form-group {
			margin-left: 38%;
		}
	
		.name {
			margin-left: 0%;
			font-size: 16px;
		}

		.photo {
			margin-left: 0%;
			font-size: 16px;
		}

		#submit {
			width: 30%;
			margin-left: 36%;
			margin-top: 20px;
		}

		h1 {
			font-size: 36px;
		}

		h3 {
			font-size: 32px;
		}

		h4 {
			font-size: 24px;
		}

	</style>

</head>

<body>
	<div class="container">
		<div class="jumbotron jumbotron-fluid-info">
			<h1 class="take text-center text-info">Take the Survey</h1>
		</div>
		<form role="form" id="survey">
			<h1 class="about text-center text-info">About You</h1>
			<div class="form-group name text-center">
				<label for="usr">Name: (Required)</label>
				<input type="text" class="form-control" id="name">
			</div>
			<div class="form-group photo text-center">
				<label for="photo">Photo: (Required)</label>
				<input type="text" class="form-control" id="photo">

			</div>

			<h2 class="rate text-center">Rate these statements:
				<hr>
			</h2>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 1</h3>
					<h4>The Patriots are the best NFL team.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question1">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 2</h3>
					<h4>Twinkies can last forever.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question2">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 3</h3>
					<h4>Chipotle is life.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question3">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 4</h3>
					<h4>Treat people the way you want to be treated.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question4">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 5</h3>
					<h4>You get what you give in life.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question5">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 6</h3>
					<h4>Binge watching Law and Order SVU on a Sunday is an ideal day.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question6">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 7</h3>
					<h4>Cells phones is the worst thing for children since sugar.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question7">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 8</h3>
					<h4>Running is the best way to reduce stress.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question8">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 9</h3>
					<h4>Scary movies are the best kind of movies.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question9">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-center">
					<h3 class="questions text-info">Question 10</h3>
					<h4>Dogs are mans best friend.</h4>
					<div class="form-group col-xs-3">
						<select class="form-control" id="question10">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
				</div>
			</div>
			<button type="button" class="btn btn-info btn-block" id="submit">Submit</button>
		</form>
		<br>
		<br>
		<!-- Modal -->
		<div id="friend-modal" class="modal" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
				  <div class="modal-content">
					<div class="modal-header">
					  <h5 class="modal-title">Your Best Match</h5>
					  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					  </button>
					</div>
					<div class="modal-body">
					  <div id="friendName"></div>
					  <img id="friendImg" class="img img-responsive" alt="">
					</div>
					<div class="modal-footer">
					  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				  </div>
				</div>
			  </div>
				<!-- End Modal -->
				<footer class="footer">
					<div class="container">
						<p><a href="/api/friends">API Friends List</a>
							| <a href="https://github.com/bonnieacuna/friendfinder">Github Repo</a></p>
					</div>
				</footer>
			</div>

			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
			 crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
			 crossorigin="anonymous"></script>
			<script type="text/javascript">

				$('#submit').on("click", function () {
					let newFriend;
					let validEntry;
					if ($("#name").val().trim() === '') {
						alert('Please enter a name');
					}
					else if ($("#photo").val().trim() === '') {
						alert('Please enter a link to photo');
					}
					else {
						const answerArray = [];
						for (let i = 1; i < 11; i++) {
							answerArray.push(parseInt($('#question' + i).val().substring(0, 1)));
						}
						newFriend =
							{
								name: $("#name").val().trim(),
								photo: $("#photo").val().trim(),
								scores: answerArray
							};
					}

					$.post("/api/friends", newFriend)
						.then(function (data) {
							console.log(data);
							// let friendName = '<h4>' + data.name + '<h4>';
							// let friendPic = '<img width="300px" src=' + data.photo + '>';
							$('#friendName').text(data.name);
							$('#friendImg').attr("src", data.photo);
							$('#friend-modal').modal("show");
							$('#survey')[0].reset();
						})
				})	
			</script>
</body>

</html>